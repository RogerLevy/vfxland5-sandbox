builtin-font fnt! \ TODO: where to call this??

REQUIRE %vfxland5%/supershow/actor.vfx
REQUIRE %vfxland5%/supershow/stage.vfx
REQUIRE %vfxland5%/supershow/sprites.vfx
REQUIRE %vfxland5%/supershow/mode.vfx

REQUIRE %idir%/../scrolling.vfx
REQUIRE %idir%/../tiled.vfx

JSONFILE %idir%/dungeon.tmj

dungeon.tmj LEVEL dungeon.lvl  front details platform background 
3 dungeon.lvl >sprlayer# !

\ REQUIRE %idir%/../obj/kvn/kvn.vfx
REQUIRE %idir%/../obj/blobby/blobby.vfx

ec-cell lvl

0 value p1

: dungeon
    just
    \ 50 50 at %kvn one to p1
    dungeon.tmj "objects" load-to-stage
    dungeon.lvl lvl! ;

: game
    work>
        <left> held? if -2. scrollx +! then
        <right> held? if 2. scrollx +! then
        <up> held? if -2. scrolly +! then
        <down> held? if 2. scrolly +! then
    show>
        lvl@ draw
        0 0 at s{ scrollx 2@ 2>i swap . . s} print
;

dungeon game